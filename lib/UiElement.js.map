{"version":3,"sources":["../src/UiElement.js"],"names":["timeoutWdio","require","config","waitforTimeout","UiElement","selector","isLoadCriterion","parentPage","undefined","name","timeout","waitForExist","browser","element","$$","AquiferFunctionalPersister","setPrecondition","setGoal","getWebElement","getHTML","failfastWithMessage","start","startsWith","Error","findWebElements","wes","getWebElements","texts","forEach","we","push","getText","doLogAndWait","logAndWait","text","style","log","emoji","verb","stuartname","object","click","isExisting","doLog","moveToObject","hover","indicatorSelector","initialIndicatorElementHtml","filler","goal","setConsequence","saveScreenshotWhileWaiting","click_waitForChange","waitUntil","value","maskTextInLogs","password","clear","keys","sleep","key","DELETE","BACKSPACE","err","messages","constructor","doSaveEventScreenshots","failSafeHover","screenshotId","logRichMessages","saveEventScreenshot","destination","dragAndDrop","filePath","chooseFile","failfastWithMessageRunner","Math","round","isVisible","propName","propValue","setName","UiContainer"],"mappings":"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","sourcesContent":["// @ts-check\nimport { key } from './Key';\nimport { log } from './AquiferLog';\nimport { UiContainer } from './UiContainer';\nimport { AquiferFunctionalPersister } from './AquiferFunctionalPersister';\n\nconst timeoutWdio = require('../wdio-conf/wdio.conf').config.waitforTimeout;\n\n/**\n * WebElement wrapper - allows for:\n * 1.  custom actions (click, hover, etc) to wait for target before attempting action.\n * 2.  custom logging per relevant action\n * 3.  child web elements\n */\nexport class UiElement extends UiContainer {\n  static $(selector) {\n    return new UiElement(selector);\n  }\n\n  /**\n     * @param {String} selector - xpath or css selector\n     */\n  constructor(selector) {\n    super();\n    this.selector = selector;\n    this.isLoadCriterion = false;\n    this.parentPage = undefined;\n  }\n\n  setName(name) {\n    return super.setName(name);\n  }\n\n  /**\n   * Marks the given UiElement as being a critical component of its parent container.  Absence of this item in the DOM means the parent container is not loaded.\n   */\n  tagAsLoadCriterion() {\n    this.isLoadCriterion = true;\n    return this;\n  }\n\n  /* eslint class-methods-use-this: \"off\" */\n  getWebElement(timeout = timeoutWdio) {\n    this.waitForExist(timeout);\n    return browser.element(this.selector);\n  }\n\n  getWebElements(timeout = timeoutWdio) {\n    this.waitForExist(timeout);\n    return $$(this.selector);\n  }\n\n  getHtml(timeout = timeoutWdio) {\n    return new AquiferFunctionalPersister(timeout)\n      .setPrecondition(() => this.waitForExist(timeout))\n      .setGoal(() => this.getWebElement().getHTML())\n      .failfastWithMessage(`timeout trying to get html for ${this.selector}`)\n      .start();\n  }\n\n  /**\n   * Returns a child UiElement component with the given relative selector.\n   * @param {string} selector must match parent selector style (xpath vs css-selector)\n   */\n  get(selector) {\n    if (this.selector.startsWith('/') && selector.startsWith('/')) {\n      return new UiElement(this.selector + selector);\n    }\n    if (!this.selector.startsWith('/') && !selector.startsWith('/')) {\n      return new UiElement(`${this.selector} ${selector}`);\n    }\n\n    throw new Error(\n      `Parent and child elements must have selectors of the same type. Parent: <${this.selector}>, Child: <${selector}>.`,\n    );\n  }\n\n  getChildren(selector) {\n    if (this.selector.startsWith('/') && selector.startsWith('/')) {\n      return this.findWebElements(this.selector + selector);\n    }\n    if (!this.selector.startsWith('/') && !selector.startsWith('/')) {\n      return this.findWebElements(`${this.selector} ${selector}`);\n    }\n\n    throw new Error(\n      `Parent and child elements must have selectors of the same type. Parent: <${this.selector}>, Child: <${selector}>.`,\n    );\n  }\n\n\n  /** Returns an array of text values of all web elements currently matching the given UiElement's selector. */\n  getTexts() {\n    const wes = this.getWebElements();\n\n    const texts = [];\n\n    wes.forEach((we) => {\n      texts.push(we.getText());\n    });\n    return texts;\n  }\n\n  getText(timeout = timeoutWdio) {\n    return this.getWebElement(timeout).getText();\n  }\n\n  click({ doLogAndWait = true, timeout = timeoutWdio } = {}) {\n    if (doLogAndWait) {\n      this.logAndWait([\n        { text: '👇 ', style: log.style.emoji },\n        { text: 'Click ', style: log.style.verb },\n        { text: `${this.stuartname} `, style: log.style.object },\n        { text: `${this.selector}`, style: log.style.selector }], timeout);\n    }\n    browser.click(this.selector);\n  }\n\n  click_ifExists(timeout = timeoutWdio) {\n    if (this.isExisting()) {\n      this.logAndWait([\n        { text: '👇 ', style: log.style.emoji },\n        { text: 'Click ', style: log.style.verb },\n        { text: `${this.stuartname} `, style: log.style.object },\n        { text: `${this.selector}`, style: log.style.selector }], timeout);\n      browser.click(this.selector);\n    }\n  }\n\n  doubleClick({ doLog = true, timeout = timeoutWdio } = {}) {\n    if (doLog) {\n      this.logAndWait([\n        { text: '👇👇 ', style: log.style.emoji },\n        { text: 'Double-click ', style: log.style.verb },\n        { text: `${this.stuartname} `, style: log.style.object },\n        { text: `${this.selector}`, style: log.style.selector }], timeout);\n    }\n    browser.click(this.selector);\n  }\n\n  /**\n   * I think this places the mouse over the center of the element and scrolls the page so the entire element is within view.\n   */\n  hover({ doLog = true, timeout = timeoutWdio } = {}) {\n    if (doLog) {\n      this.logAndWait([\n        { text: '🕴  ', style: log.style.emoji },\n        { text: 'Hover ', style: log.style.verb },\n        { text: `${this.stuartname} `, style: log.style.object },\n        { text: `${this.selector}`, style: log.style.selector }], timeout);\n    }\n    browser.moveToObject(this.selector);\n    return this;\n  }\n\n  scroll(timeout = timeoutWdio) {\n    return this.hover({ doLog: false, timeout });\n  }\n\n  click_waitForChange({ indicatorSelector = '//body', doLog = true, timeout = timeoutWdio } = {}) {\n    const initialIndicatorElementHtml = browser.element(indicatorSelector).getHTML();\n    doLog\n      && this.logAndWait([\n        { text: '👇 ', style: log.style.emoji },\n        { text: 'Click ', style: log.style.verb },\n        { text: `${this.stuartname} `, style: log.style.object },\n        { text: 'then wait for change in ', style: log.style.filler },\n        { text: indicatorSelector, style: log.style.selector },\n        { text: ' target: ', style: log.style.filler },\n        { text: `${this.selector} `, style: log.style.selector }], timeout);\n\n    browser.click(this.selector);\n\n    const goal = () => browser.element(indicatorSelector).getHTML() !== initialIndicatorElementHtml;\n\n    new AquiferFunctionalPersister(timeout / 2)\n      .setGoal(goal)\n      .setConsequence(() => log.saveScreenshotWhileWaiting())\n      .start();\n\n    new AquiferFunctionalPersister(timeout / 2)\n      .setGoal(goal)\n      .failfastWithMessage(`Timeout waiting ${timeout} ms for ${indicatorSelector} to change after clicking ${this.selector}`)\n      .start();\n  }\n\n  click_waitForExisting(indicatorSelector, timeout = timeoutWdio) {\n    if (browser.isExisting(indicatorSelector)) {\n      throw new Error(`Element already exists: ${indicatorSelector}`);\n    }\n    this.logAndWait([\n      { text: '👇 ', style: log.style.emoji },\n      { text: 'Click ', style: log.style.verb },\n      { text: `${this.stuartname} `, style: log.style.object },\n      { text: 'then wait for element to exist: ', style: log.style.filler },\n      { text: indicatorSelector, style: log.style.selector },\n      { text: ' target: ', style: log.style.filler },\n      { text: `${this.selector} `, style: log.style.selector }, timeout]);\n\n    browser.click(this.selector);\n\n    const goal = () => browser.isExisting(indicatorSelector);\n\n    new AquiferFunctionalPersister(timeout / 2)\n      .setGoal(goal)\n      .setConsequence(() => log.saveScreenshotWhileWaiting())\n      .start();\n\n    new AquiferFunctionalPersister(timeout / 2)\n      .setGoal(goal)\n      .failfastWithMessage(`Timeout waiting ${timeout} ms for ${indicatorSelector} to exist after clicking ${this.selector}`)\n      .start();\n  }\n\n  /**\n   * Clicks each instance of the given webelement assuming it disappears upon click.\n   */\n  clickAll_disappearing(timeout = timeoutWdio) {\n    this.logAndWait([\n      { text: '👇 ', style: log.style.emoji },\n      { text: 'Click to remove all instances of ', style: log.style.verb },\n      { text: `${this.stuartname} `, style: log.style.object },\n      { text: this.selector, style: log.style.selector }, timeout]);\n\n    this.click_waitForChange({ doLog: false });\n\n    while (this.isExisting()) {\n      this.click_waitForChange({ doLog: false });\n    }\n  }\n\n\n  click_waitForNotExisting({ indicatorSelector = this.selector, timeout = timeoutWdio } = {}) {\n    if (indicatorSelector === this.selector) {\n      this.logAndWait([\n        { text: '👇 ', style: log.style.emoji },\n        { text: 'Click ', style: log.style.verb },\n        { text: `${this.stuartname} `, style: log.style.object },\n        { text: 'then wait for target to disappear ', style: log.style.filler },\n        { text: indicatorSelector, style: log.style.selector }, timeout]);\n    } else {\n      this.logAndWait([\n        { text: '👇 ', style: log.style.emoji },\n        { text: 'Click ', style: log.style.verb },\n        { text: `${this.stuartname} `, style: log.style.object },\n        { text: 'then wait for element to disappear: ', style: log.style.filler },\n        { text: indicatorSelector, style: log.style.selector },\n        { text: ' target: ', style: log.style.filler },\n        { text: `${this.selector} `, style: log.style.selector }, timeout]);\n    }\n    browser.click(this.selector);\n\n    browser.waitUntil(() => !browser.isExisting(indicatorSelector), timeout);\n  }\n\n  setValue(value, { maskTextInLogs = false, timeout = timeoutWdio } = {}) {\n    if (typeof value === 'number') {\n      throw new Error('input can be string or array, not number');\n    }\n    this.logAndWait([\n      { text: '⌨  ', style: log.style.emoji },\n      { text: 'Set value ', style: log.style.verb },\n      { text: 'of ', style: log.style.filler },\n      { text: `${this.stuartname} `, style: log.style.object },\n      { text: 'to ', style: log.style.filler },\n      { text: `${value} `, style: maskTextInLogs ? log.style.password : log.style.object },\n      { text: `${this.selector} `, style: log.style.selector }], timeout);\n\n    /* note: browser.setValue doesn't work with the WS editor in branch rules. */\n\n    this.clear({ doLog: false, timeout });\n    this.keys(value, 1, false);\n  }\n\n  /**\n   * Deletes all values in a field using backspace and delete keys.\n   */\n  clear({ doLog = true, timeout = timeoutWdio } = {}) {\n    doLog\n      && this.logAndWait([\n        { text: '✨ ', style: log.style.emoji },\n        { text: 'Clear ', style: log.style.verb },\n        { text: `${this.stuartname} `, style: log.style.object },\n        { text: `${this.selector} `, style: log.style.selector }], timeout);\n\n    this.click({ doLogAndWait: false, timeout });\n    this.sleep(100);\n    this.keys(key.DELETE, 20, key.BACKSPACE, 40, false);\n  }\n\n  /** If event screenshots are being saved, attempt to hover over an object prior to interacting with it so that the mouse-over state is captured in the image.  */\n  failSafeHover(timeout = timeoutWdio) {\n    try {\n      browser.waitUntil(() => (browser.isExisting(this.selector)), timeout);\n      browser.moveToObject(this.selector);\n    } catch (err) {\n      // do nothing.\n    }\n  }\n\n  logAndWait(messages, timeout = timeoutWdio) {\n    if (!this.name) {\n      throw new Error(`Found ${this.constructor.name} with no name.  Make sure that the constructor for each class extending UiContainer ends with super.nameElements(). selector: ${this.selector}`);\n    }\n    if (log.doSaveEventScreenshots) {\n      this.failSafeHover(timeout);\n    }\n    const screenshotId = log.logRichMessages(messages);\n\n    log.saveEventScreenshot(screenshotId);\n\n    this.waitForExist(timeout);\n  }\n\n  clickAndType(value, timeout = timeoutWdio) {\n    this.logAndWait([\n      { text: '👇 ', style: log.style.emoji },\n      { text: 'Click ', style: log.style.verb },\n      { text: this.stuartname, style: log.style.object },\n      { text: ' and ', style: log.style.filler },\n      { text: 'type ', style: log.style.verb },\n      { text: value, style: log.style.object },\n      { text: ` ${this.selector}`, style: log.style.selector }], timeout);\n\n    browser.click(this.selector);\n\n    browser.keys(value);\n  }\n\n  /**\n   *\n   * @param {UiElement} destination\n   */\n  dragAndDropTo(destination, timeout = timeoutWdio) {\n    this.logAndWait([\n      { text: '🏎  ', style: log.style.emoji },\n      { text: 'Drag ', style: log.style.verb },\n      { text: this.stuartname, style: log.style.object },\n      { text: ' to ', style: log.style.filler },\n      { text: destination.stuartname, style: log.style.object },\n      { text: ' [', style: log.style.filler },\n      { text: this.selector, style: log.style.selector },\n      { text: '], [', style: log.style.filler },\n      { text: destination.selector, style: log.style.selector },\n      { text: ']', style: log.style.filler }], timeout);\n\n    browser.dragAndDrop(this.selector, destination.selector);\n  }\n\n  uploadFile(filePath, timeout = timeoutWdio) {\n    this.logAndWait([\n      { text: '📂 ', style: log.style.emoji },\n      { text: 'Upload file ', style: log.style.verb },\n      { text: `${filePath} `, style: log.style.object },\n      { text: 'to ', style: log.style.filler },\n      { text: `${this.stuartname} `, style: log.style.object },\n      { text: `${this.selector} `, style: log.style.selector }], timeout);\n\n    browser.chooseFile(this.selector, filePath);\n  }\n\n  waitForText(text, timeout = timeoutWdio) {\n    super.waitForLoad(timeout);\n    const screenshotId = log.logRichMessages([\n      { text: '🤔 ', style: log.style.emoji },\n      { text: 'Assert ', style: log.style.verb },\n      { text: this.stuartname, style: log.style.object },\n      { text: \"'s text is \", style: log.style.filler },\n      { text, style: log.style.object },\n      { text: ` ${this.selector}`, style: log.style.selector }]);\n\n    this.waitForExist(timeout);\n\n    const goal = () => text === this.getWebElement(timeout).getText();\n\n    new AquiferFunctionalPersister(timeout / 2)\n      .setGoal(goal)\n      .setConsequence(() => log.saveScreenshotWhileWaiting())\n      .start();\n\n    new AquiferFunctionalPersister(timeout / 2)\n      .setGoal(goal)\n      .failfastWithMessageRunner(() => `Element \"${this.stuartname}\"'s text is \"${this.getWebElement(timeout).getText()}\" after ${timeout} ms.  Expected: \"${text}\". Selector: ${this.selector}`)\n      .start();\n\n    log.saveEventScreenshot(screenshotId);\n  }\n\n  waitForNotExist(timeout = timeoutWdio) {\n    try {\n      browser.waitUntil(() => !browser.isExisting(this.selector), Math.round(timeout / 2));\n    } catch (err) {\n      log.saveScreenshotWhileWaiting();\n    }\n    try {\n      browser.waitUntil(() => !browser.isExisting(this.selector), timeout);\n    } catch (err) {\n      throw new Error(`Error waiting for ${this.stuartname} to not exist within ${timeout} ms. Selector: ${this.selector}.  Original error: ${err} `);\n    }\n  }\n\n  /**\n   * Doesn't log.\n   * @param {Number} timeout in milliseconds\n   */\n  waitForExist(timeout = timeoutWdio) {\n    try {\n      browser.waitUntil(() => browser.isExisting(this.selector), Math.round(timeout / 2));\n    } catch (err) {\n      log.saveScreenshotWhileWaiting();\n    }\n\n    try {\n      browser.waitUntil(() => browser.isExisting(this.selector), Math.round(timeout / 2));\n    } catch (err) {\n      throw new Error(`Error finding ${this.stuartname} within ${timeout} ms. Selector: ${this.selector}.  Original error: ${err} `);\n    }\n    return true;\n  }\n\n  /**\n   * This is not a super reliable function since selenium isn't 100% accurate at determining visibility.\n   * @param {Number} timeout in milliseconds\n   */\n  waitForVisible(timeout = timeoutWdio) {\n    try {\n      browser.waitUntil(() => browser.isVisible(this.selector), Math.round(timeout / 2));\n    } catch (err) {\n      log.saveScreenshotWhileWaiting();\n    }\n    try {\n      browser.waitUntil(() => browser.isVisible(this.selector), timeout);\n    } catch (err) {\n      throw new Error(`Error finding visible ${this.stuartname} within ${timeout} ms. Selector: ${this.selector}.  Original error: ${err} `);\n    }\n  }\n\n  isExisting() {\n    return browser.isExisting(this.selector);\n  }\n\n  /* eslint guard-for-in: \"off\", no-restricted-syntax: \"off\" */\n  /**\n   * This adds a custom name parameter to each element object so that the variable's name\n   * can be displayed in the ui test logs instead of just a potentially cryptic selector.\n   *\n   * This was inspired by the idea that maybe we should avoid using visible values in selectors to prepare for multi-language support\n   */\n  nameElements() {\n    for (const propName in this) {\n      const propValue = this[propName];\n      if (propValue instanceof UiElement) {\n        propValue.setName(propName);\n      }\n    }\n  }\n}\n"],"file":"UiElement.js"}